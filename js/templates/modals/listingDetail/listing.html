<div class="popInMessageHolder js-popInMessages"></div>
<% if (ob.ownListing) { %>
<div class="listingControls btnStrip">
  <a class="btn js-editListing clrP clrBr">Edit</a>
  <a class="btn js-deleteListing clrP clrBr">Delete</a>
</div>
<% } %>

<div class="listingContent flexColRow gutterVLg">
  <div class="box clrP clrBr padLg">
    <div class="flex">
      <h2 class="txUnb flexExpand"><%= ob.item.title %></h2>
      <h2 class="txUnb"><%= ob.convertAndFormatCurrency(ob.item.price, ob.metadata.pricingCurrency, ob.displayCurrency) %></h2>
    </div>
    <div class="flex gutterHLg">
      <div>
        <div class="mainImage clrBr"
        <% if (ob.item.images.length) { %>
          <% console.log(ob.item.images) %>
          style="background-image: url(<%= ob.getServerUrl(`ipfs/${ob.isHiRez() ? ob.item.images[0].large : ob.item.images[0].medium}`) %>), url('../imgs/defaultListing.png')"
        <% } else { %>
          style="background-image: url('../imgs/defaultListing.png')"
        <% } %>
        ></div>
      <% if(ob.item.images.length > 1) { %>
        <div class="pad txCtr">
          <a class="tx5 js-gotoPhotos">
            <u><%= ob.polyT('listingDetail.viewPhotos', { count: ob.item.images.length }) %></u>
          </a>
        </div>
      <% } %>
      </div>
      <div class="flexExpand">
        <div class="buyBox clrP clrBr">
          <div class="flexColRows flexHCent gutterV">
            <!-- this will loop through each variant, just placeholder code for formatting-->
            <!-- commented out until variants exist
            <div class="flexVCent gutterHLg">
              <div class="h5 txUnl">Size</div>
              <div class="flexExpand">
                <select class="js-variantSelect" name="">
                  <option>some option 1</option>
                  <option>some option 2</option>
                  <option>some option 3</option>
                </select>
              </div>
            </div>
            -->
            <button class="btnHg clrBAttGrad clrBr3 clrTOnEmph">Buy Now</button>
            <div class="flexHCent gutterH">
              <div class="ion-star"> X.X</div><!-- placeholder until reviews exist -->
              <div class="ion-chatbubble"> X.X</div><!-- placeholder until reviews exist -->
              <% if(ob.shipsFreeToMe) { %>
              <div class="txCtr">
                <span class="clrE1 clrTOnEmph txTn txCtr txUp phraseBox"><%= ob.polyT('listingDetail.freeShippingBanner') %></span>
              </div>
              <% } %>
            </div>
          </div>
        </div>
        <div class="flexHCent gutterHLg tx5 rowLg">
          <div>
            <%= ob.polyT('listingDetail.type', { type: `<b>${ob.polyT(`editListing.formats.${ob.metadata.contractType}`)}</b>` }) %>
          </div>
          <% if (ob.item.condition) { %>
            <div><%= ob.polyT('listingDetail.condition', { condition: `<b>${ob.polyT(`listingDetail.conditionTypes.${ob.item.condition}`)}</b>` }) %></div>
          <% } %>
        </div>
        <% if(ob.item.tags.length) { %>
          <hr class="rowLg">
          <h5><%= ob.polyT('listingDetail.tags') %></h5>
          <div class="tagWrapper">
            <% ob.item.tags.forEach(function(tag){
            print(`<div class="btn tag clrBr">${tag}</div>`);
            }); %>
          </div>
        <% } %>
      </div>
    </div>
  </div>
  <div class="box clrP clrBr padLg">
    <h2 class="txUnb"><%= ob.polyT('listingDetail.description') %></h2>
    <%= ob.item.description %>
  </div>
  <div class="box clrP clrBr padLg" id="photoSection">
    <% ob.item.images.forEach(function(image){
    print(`<img src="${ob.getServerUrl(`ipfs/${ob.isHiRez() ? image.small : image.tiny}`)}">`);
    }); %>
  </div>
  <div class="box clrP clrBr padLg">
    <h2 class="txUnb"><%= ob.polyT('listingDetail.reviews') %></h2>
    Placeholder for Reviews
  </div>

  <!-- attachments here -->

  <% if (ob.shippingOptions.length) { %>
    <div class="box clrP clrBr padLg">
      <h2 class="txUnb"><%= ob.polyT('listingDetail.shipping') %></h2>
      <div class="flexVCent gutterHLg tx5">
        <div><%= ob.polyT('listingDetail.shipsFrom', { country: `<b>${ob.polyT(`countries.${ob.shipsFromCountry}`)}</b>` }) %></div>
        <div><%= ob.polyT('listingDetail.shipTo') %></div>
        <div class="col4"><select id="shippingDestinations"></select></div>
      </div>
      <hr>
      <div class="js-shippingOptions"></div>
    </div>
  <% } %>
  <% if (ob.refundPolicy) { %>
    <div class="box clrP clrBr padLg">
      <h2 class="txUnb"><%= ob.polyT('listingDetail.refundPolicy') %></h2>
      <%= ob.refundPolicy %>
    </div>
  <% } %>
  <% if (ob.termsAndConditions) { %>
    <div class="box clrP clrBr padLg">
      <h2 class="txUnb"><%= ob.polyT('listingDetail.termsAndConditions') %></h2>
      <%= ob.termsAndConditions %>
    </div>
  <% } %>
  <div class="box clrP clrBr padLg">
    <div>
      <div>
      <% ob.item.categories.forEach(function(category){
      print(`category: ${category}`);
      }); %>
      </div>
      <div>
        nsfw: <%= ob.item.nsfw %>
      </div>
      <div>
      sku: <%= ob.item.sku %>
      </div>

      <div>
        format: <%= ob.metadata.format %>
      </div>
      <div>
      <% ob.shippingOptions.forEach(function(option){
        print(`shipping option: ${option}`);
      }); %>
      </div>
    </div>
  </div>


    <% console.log(ob) %>
    <span class="clrE1 clrTOnEmph txTiny txCtr txUp padTn <% print(ob.shipsFreeToMe ? '' : 'hide') %> js-shipsFreeBanner">Free Shipping (translate me yo)</span>
</div>


<h1><%= ob.item.title %></h1>
<div><%= ob.convertAndFormatCurrency(ob.item.price, ob.metadata.pricingCurrency, ob.displayCurrency) %></div>
<br />
<span class="clrE1 clrTOnEmph txTiny txCtr txUp padTn <% print(ob.shipsFreeToMe ? '' : 'hide') %> js-shipsFreeBanner"><%= ob.polyT('listingDetail.freeShippingBanner') %></span>

